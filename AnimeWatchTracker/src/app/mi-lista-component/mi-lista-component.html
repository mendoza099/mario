<div class="mi-lista-container">
  <h1>Mi Lista de Animes</h1>

  <div class="stats-grid">
    <div class="stat-card" [class.active]="activeFilter() === 'Todos'" (click)="setFilter('Todos')">
      <div class="stat-number">{{ stats().total }}</div>
      <div class="stat-label">Total</div>
    </div>
    
    <div class="stat-card" [class.active]="activeFilter() === 'Favoritos'" (click)="setFilter('Favoritos')">
      <div class="stat-number">{{ stats().favoritos }}</div>
      <div class="stat-label">‚ù§Ô∏è Favoritos</div>
    </div>
    
    <div class="stat-card" [class.active]="activeFilter() === 'Pendiente'" (click)="setFilter('Pendiente')">
      <div class="stat-number">{{ stats().pendiente }}</div>
      <div class="stat-label">Pendiente</div>
    </div>
    
    <div class="stat-card" [class.active]="activeFilter() === 'Viendo'" (click)="setFilter('Viendo')">
      <div class="stat-number">{{ stats().viendo }}</div>
      <div class="stat-label">Viendo</div>
    </div>
    
    <div class="stat-card" [class.active]="activeFilter() === 'Completado'" (click)="setFilter('Completado')">
      <div class="stat-number">{{ stats().completado }}</div>
      <div class="stat-label">Completado</div>
    </div>
    
    <div class="stat-card" [class.active]="activeFilter() === 'Abandonado'" (click)="setFilter('Abandonado')">
      <div class="stat-number">{{ stats().abandonado }}</div>
      <div class="stat-label">Abandonado</div>
    </div>
  </div>

  @if (filteredList().length === 0) {
    <div class="empty-state">
      <h2>Tu lista est√° vac√≠a</h2>
      <p>Comienza a explorar y a√±ade animes a tu lista personal</p>
      <a routerLink="/" class="btn-explore">Explorar Animes</a>
    </div>
  } @else {
    <div class="filter-info">
      <h2>{{ activeFilter() }} ({{ filteredList().length }})</h2>
    </div>

    <div class="anime-grid">
      @for (item of filteredList(); track item.anime.mal_id) {
        <div class="anime-card">
          <a [routerLink]="['/anime', item.anime.mal_id]" class="anime-link">
            <img 
              [src]="item.anime.images.jpg.large_image_url" 
              [alt]="item.anime.title"
              class="anime-image"
            />
            <div class="anime-overlay">
              <span class="status-badge" [attr.data-status]="item.status">
                {{ item.status }}
              </span>
            </div>
          </a>
          
          <div class="anime-info">
            <h3>{{ item.anime.title }}</h3>
            
            <div class="anime-meta">
              <span class="score">‚≠ê {{ item.anime.score || 'N/A' }}</span>
              @if (item.personalScore) {
                <span class="personal-score">Tu nota: {{ item.personalScore }}</span>
              }
            </div>

            <div class="anime-actions">
              <button 
                (click)="toggleFavorite(item.anime.mal_id)"
                [class.favorite]="item.isFavorite"
                class="btn-favorite-small"
                title="Marcar como favorito"
              >
                {{ item.isFavorite ? '‚ù§Ô∏è' : 'ü§ç' }}
              </button>
              
              <button 
                (click)="removeAnime(item.anime.mal_id)"
                class="btn-remove"
                title="Eliminar de lista"
              >
                üóëÔ∏è
              </button>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
