<div class="buscador-container">
  <div class="header-section">
    <h1>Buscador Avanzado</h1>
    <p>Encuentra tu próximo anime sin perder el tiempo</p>
    <p class="subtitle">Combina filtros por nombre, formato, estado y clasificación para descubrir animes que se ajusten exactamente a tu mood</p>
  </div>

  <form class="filters-form" [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <div class="filters-grid">
      <div class="filter-field">
        <label>Nombre</label>
        <input formControlName="username" placeholder="Ej: Naruto, One Piece...">
      </div>
      
      <div class="filter-field">
        <label>Tipo</label>
        <select formControlName="opcionesTipo">
          <option value="1">Cualquiera</option>
          <option value="2">TV</option>
          <option value="3">Película</option>
          <option value="4">OVA</option>
          <option value="5">Especial</option>
        </select>
      </div>

      <div class="filter-field">
        <label>Estado</label>
        <select formControlName="opcionesEstado">
          <option value="1">Cualquiera</option>
          <option value="2">En emisión</option>
          <option value="3">Finalizado</option>
          <option value="4">Próximamente</option>
        </select>
      </div>

      <div class="filter-field">
        <label>Clasificación</label>
        <select formControlName="opcionesClasificacion">
          <option value="1">Cualquiera</option>
          <option value="2">G - Todo público</option>
          <option value="3">PG - Niños</option>
          <option value="4">PG-13 - Adolescentes</option>
          <option value="5">R-17+ - Contenido maduro</option>
          <option value="6">R+ - Desnudez leve</option>
          <option value="7">RX - Hentai</option>
        </select>
      </div>

      <div class="filter-field">
        <label>Fecha Inicio</label>
        <input type="date" formControlName="fechaInicio">
      </div>

      <div class="filter-field">
        <label>Fecha Fin</label>
        <input type="date" formControlName="fechaFin">
      </div>

      <div class="filter-field">
        <label>Ordenar por</label>
        <select formControlName="opcionesOrdenar">
          <option value="1">Sin ordenar</option>
          <option value="2">Puntuación</option>
          <option value="3">Popularidad</option>
          <option value="4">Ranking</option>
          <option value="5">Título</option>
          <option value="6">Año</option>
        </select>
      </div>

      <div class="filter-field">
        <label>Dirección</label>
        <select formControlName="opcionesDireccion">
          <option value="1">Por Defecto</option>
          <option value="2">Ascendente</option>
          <option value="3">Descendente</option>
        </select>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" (click)="onReset()" class="btn-reset">Limpiar Filtros</button>
      <button type="submit" class="btn-submit">Buscar</button>
    </div>
  </form>

  @if (loading()) {
    <div class="loading">
      <p>Buscando animes...</p>
    </div>
  }

  @if (error() && !loading()) {
    <div class="error">
      <p>{{ error() }}</p>
    </div>
  }

  @if (animes().length > 0 && !loading()) {
    <div class="results">
      <h2>Resultados ({{ animes().length }})</h2>
      <div class="anime-grid">
        @for (anime of animes(); track anime.mal_id) {
          <a [routerLink]="['/anime', anime.mal_id]" class="anime-card">
            <img 
              [src]="anime.images.jpg.large_image_url" 
              [alt]="anime.title"
              class="anime-image"
            />
            <div class="anime-info">
              <h4 class="anime-title">{{ anime.title }}</h4>
              <div class="anime-meta">
                <span class="score">⭐ {{ anime.score || 'N/A' }}</span>
                <span class="type">{{ anime.type }}</span>
              </div>
            </div>
          </a>
        }
      </div>
    </div>
  }
</div>
